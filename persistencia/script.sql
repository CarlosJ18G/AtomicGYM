CREATE TABLE "users" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"document" VARCHAR(12) NOT NULL,
	"fullname" VARCHAR(100) NOT NULL,
	"email" VARCHAR(255) NOT NULL,
	"phone_number" NUMERIC NOT NULL,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	"passwork" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);
CREATE INDEX "Users_index_0"
ON "users" ("document");

CREATE TABLE "type_employee" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL UNIQUE,
	"create_at" TIMESTAMP DEFAULT NOW(),
	"modified_at" TIMESTAMP,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	PRIMARY KEY("id")
);

CREATE TABLE "employees" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"type_employee_id" INTEGER NOT NULL,
	"user_id" INTEGER NOT NULL,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	"title" VARCHAR(255),
	PRIMARY KEY("id")
);

CREATE TABLE "maquines" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"quantity" INTEGER NOT NULL DEFAULT 1,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	"status" VARCHAR(255) DEFAULT 'DISPONIBLE',
	"description" TEXT NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "membership" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"amount" DECIMAL NOT NULL,
	"period" INTEGER NOT NULL,
	"create_at" TIMESTAMP DEFAULT NOW(),
	"modified_at" TIMESTAMP,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	"description" TEXT NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "services" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"amount" DECIMAL,
	"create_at" TIMESTAMP DEFAULT NOW(),
	"modified_at" TIMESTAMP,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	PRIMARY KEY("id")
);

CREATE TABLE "countries" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	PRIMARY KEY("id")
);

CREATE TABLE "states" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"country_id" INTEGER NOT NULL,
	"name" VARCHAR(255) NOT NULL,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	PRIMARY KEY("id")
);

CREATE TABLE "cities" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"state_id" INTEGER NOT NULL,
	"name" VARCHAR(255) NOT NULL,
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	PRIMARY KEY("id")
);

CREATE TABLE "headquarters" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"city_id" INTEGER NOT NULL,
	"name" VARCHAR(255) NOT NULL,
	"address" VARCHAR(255),
	"active" BOOLEAN NOT NULL DEFAULT TRUE,
	PRIMARY KEY("id")
);

CREATE TABLE "membership_services" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"service_id" INTEGER NOT NULL,
	"membership_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "muscular_group" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"create_at" TIMESTAMP DEFAULT NOW(),
	"modified_at" TIMESTAMP,
	PRIMARY KEY("id")
);

CREATE TABLE "muscle" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"muscular_group_id" INTEGER NOT NULL,
	"create_at" TIMESTAMP DEFAULT NOW(),
	"modified_at" TIMESTAMP,
	PRIMARY KEY("id")
);

CREATE TABLE "machine_muscle" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"muscle_id" INTEGER NOT NULL,
	"maquine_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "maintenance" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"machine_id" INTEGER NOT NULL,
	"maintenance_date" DATE NOT NULL DEFAULT NOW(),
	"employee_id" INTEGER NOT NULL,
	"observations" TEXT,
	PRIMARY KEY("id")
);

CREATE TABLE "membership_user" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"membership_id" INTEGER NOT NULL,
	"user_id" INTEGER NOT NULL,
	"headquarter_id" INTEGER,
	"initial_date" DATE NOT NULL DEFAULT NOW(),
	"cut_day" INTEGER NOT NULL DEFAULT 01,
	PRIMARY KEY("id")
);

CREATE TABLE "headquarter_machine" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"machine_id" INTEGER NOT NULL,
	"headquarter_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "headquarter_employee" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"headquarter_id" INTEGER NOT NULL,
	"employee_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "payment" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"payment_detail_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "payment_detail" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"user_id" INTEGER NOT NULL,
	"option" VARCHAR(100) NOT NULL DEFAULT 'MEMBRESIA',
	"amount" DECIMAL NOT NULL,
	"payment_date" TIMESTAMP,
	"payment_status" VARCHAR(255) DEFAULT 'PENDIENTE',
	"payment_method_id" INTEGER,
	PRIMARY KEY("id")
);

CREATE TABLE "payment_method" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"create_at" TIMESTAMP DEFAULT NOW(),
	PRIMARY KEY("id")
);

CREATE TABLE "exercise" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"exercise_type_id" INTEGER NOT NULL,
	"description" TEXT NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "exercise_muscle" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"exercise_id" INTEGER NOT NULL,
	"muscle_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "exercise_type" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "routine" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" INTEGER NOT NULL,
	"description" TEXT NOT NULL,
	"trainer_id" INTEGER,
	"user_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "exercise_routine" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"routine_id" INTEGER NOT NULL,
	"exercise_id" INTEGER NOT NULL,
	"sets_count" INTEGER NOT NULL,
	"reps_count" INTEGER NOT NULL,
	"modified_by" INTEGER,
	"modified_at" TIMESTAMP,
	PRIMARY KEY("id")
);

CREATE TABLE "routine_type" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "routine_routine_type" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"routine_id" INTEGER NOT NULL,
	"routine_type_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "trainer" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"employee_id" INTEGER NOT NULL,
	"specialitiation" VARCHAR(255),
	"users_count" INTEGER NOT NULL DEFAULT 0,
	"email" VARCHAR(255),
	"phone_number" NUMERIC,
	"description" TEXT NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "trainer_user" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"trainer_id" INTEGER NOT NULL,
	"user_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

ALTER TABLE "headquarters"
ADD FOREIGN KEY("city_id") REFERENCES "cities"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "cities"
ADD FOREIGN KEY("state_id") REFERENCES "states"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "states"
ADD FOREIGN KEY("country_id") REFERENCES "countries"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "employees"
ADD FOREIGN KEY("user_id") REFERENCES "users"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "employees"
ADD FOREIGN KEY("type_employee_id") REFERENCES "type_employee"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "membership_user"
ADD FOREIGN KEY("user_id") REFERENCES "users"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "membership_user"
ADD FOREIGN KEY("membership_id") REFERENCES "membership"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "membership_services"
ADD FOREIGN KEY("service_id") REFERENCES "services"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "membership_services"
ADD FOREIGN KEY("membership_id") REFERENCES "membership"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "maintenance"
ADD FOREIGN KEY("machine_id") REFERENCES "maquines"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "maintenance"
ADD FOREIGN KEY("employee_id") REFERENCES "employees"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "machine_muscle"
ADD FOREIGN KEY("maquine_id") REFERENCES "maquines"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "muscle"
ADD FOREIGN KEY("muscular_group_id") REFERENCES "muscular_group"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "headquarter_machine"
ADD FOREIGN KEY("machine_id") REFERENCES "maquines"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "headquarter_machine"
ADD FOREIGN KEY("headquarter_id") REFERENCES "headquarters"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "headquarter_employee"
ADD FOREIGN KEY("headquarter_id") REFERENCES "headquarters"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "headquarter_employee"
ADD FOREIGN KEY("employee_id") REFERENCES "employees"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "membership_user"
ADD FOREIGN KEY("headquarter_id") REFERENCES "headquarters"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "payment"
ADD FOREIGN KEY("payment_detail_id") REFERENCES "payment_detail"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "payment_detail"
ADD FOREIGN KEY("user_id") REFERENCES "users"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "payment_detail"
ADD FOREIGN KEY("payment_method_id") REFERENCES "payment_method"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "exercise_muscle"
ADD FOREIGN KEY("muscle_id") REFERENCES "muscle"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "exercise_muscle"
ADD FOREIGN KEY("exercise_id") REFERENCES "exercise"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "machine_muscle"
ADD FOREIGN KEY("muscle_id") REFERENCES "muscle"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "exercise"
ADD FOREIGN KEY("exercise_type_id") REFERENCES "exercise_type"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "exercise_routine"
ADD FOREIGN KEY("routine_id") REFERENCES "routine"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "exercise_routine"
ADD FOREIGN KEY("exercise_id") REFERENCES "exercise"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "routine"
ADD FOREIGN KEY("user_id") REFERENCES "users"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "routine_routine_type"
ADD FOREIGN KEY("routine_type_id") REFERENCES "routine_type"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "routine_routine_type"
ADD FOREIGN KEY("routine_id") REFERENCES "routine"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "trainer"
ADD FOREIGN KEY("employee_id") REFERENCES "employees"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "trainer_user"
ADD FOREIGN KEY("trainer_id") REFERENCES "trainer"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "trainer_user"
ADD FOREIGN KEY("user_id") REFERENCES "users"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "routine"
ADD FOREIGN KEY("trainer_id") REFERENCES "trainer"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "exercise_routine"
ADD FOREIGN KEY("modified_by") REFERENCES "users"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;